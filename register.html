<!DOCTYPE html>
<html>
  <meta charset="utf-8" />

  <head>
    <script type="text/javascript" src="./js/code.js"></script>
    <link href="../css/styles.css" rel="stylesheet" />
    <title>Register</title>
  </head>

  <body>
    <div class="bigContainer" id="registerContainer">
      <div class="container">
        <h1 id="title">Register</h1>
        <div class="imgcontainer">
          <img src="../images/img_avatar2.png" alt="Avatar" class="avatar" />
        </div>
        <form action="javascript:doRegister()">
          <label for="firstName"><b>First Name</b></label>
          <input
            type="text"
            placeholder="Enter First Name"
            id="firstName"
            name="firstName"
            required
          />
          <label for="lastName"><b>Last Name</b></label>
          <input
            type="text"
            placeholder="Enter Last Name"
            id="lastName"
            name="lastName"
            required
          />
          <label for="userName"><b>Username</b></label>
          <input
            type="text"
            placeholder="Enter Username"
            id="userName"
            name="userName"
            required
          />

          <label for="psw"><b>Password</b></label>
          <input
            type="password"
            placeholder="Enter Password"
            id="password"
            name="password"
            pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" 
            required
          />
          <span id="registerResult"></span>
          <button type="submit" id="registerButton">
            Register
          </button>
          <div class="links">
            Already have an account? <a href="index.html">Back to log in</a>
          </div>
        </form>
      </div>
    </div>
    
    <div class="passwordContainer">
      <div id="message">
        <h3>Password must contain the following:</h3>
        <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
        <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
        <p id="number" class="invalid">A <b>number</b></p>
        <p id="length" class="invalid">Minimum <b>8 characters</b></p>
      </div>
    </div>
    <script>
      var myInput = document.getElementById("password");
      var letter = document.getElementById("letter");
      var capital = document.getElementById("capital");
      var number = document.getElementById("number");
      var length = document.getElementById("length");
      // When the user clicks on the password field, show the message box
      myInput.onfocus = function() {
        document.getElementById("message").style.display = "block";
      }

      // When the user clicks outside of the password field, hide the message box
      myInput.onblur = function() {
        document.getElementById("message").style.display = "none";
      }

      // When the user starts to type something inside the password field
      myInput.onkeyup = function() {
        // Validate lowercase letters
        var lowerCaseLetters = /[a-z]/g;
        if(myInput.value.match(lowerCaseLetters)) {  
            letter.classList.remove("invalid");
            letter.classList.add("valid");
        } else {
            letter.classList.remove("valid");
            letter.classList.add("invalid");
        }
        
        // Validate capital letters
        var upperCaseLetters = /[A-Z]/g;
        if(myInput.value.match(upperCaseLetters)) {  
            capital.classList.remove("invalid");
            capital.classList.add("valid");
        } else {
            capital.classList.remove("valid");
            capital.classList.add("invalid");
        }

        // Validate numbers
        var numbers = /[0-9]/g;
        if(myInput.value.match(numbers)) {  
            number.classList.remove("invalid");
            number.classList.add("valid");
        } else {
            number.classList.remove("valid");
            number.classList.add("invalid");
        }
        
        // Validate length
        if(myInput.value.length >= 8) {
            length.classList.remove("invalid");
            length.classList.add("valid");
        } else {
            length.classList.remove("valid");
            length.classList.add("invalid");
        }
      }
    </script>
  </body>
</html>
